{
	"variables": {
		"ISO_DIRECTORY": ""
	},
	"builders": [
		{
			"type": "qemu",
			"iso_url": "{{user `ISO_DIRECTORY` }}/centos7.iso",
			"iso_checksum": "",
			"iso_checksum_type": "none",
			"headless": true,
			"ssh_wait_timeout": "30m",
			"ssh_username": "root",
			"ssh_password": "password",
			"disk_size": 10000,
			"qemuargs": [["-m", "2048M"]],
			"boot_wait": "10s",
			"qemuargs": [ 
				"-nographic",
				[
					"-device",
					"virtio-scsi-pci"
				],
				[
					"-drive",
					"if=none,cache=unsafe,format=qcow2,discard=unmap,file=output-qemu/demo-centos7-minimal.qcow2"
				]
			 ],
			"http_directory": "./",
			"vm_name": "demo-centos7-minimal",
			"boot_command":
			[
				"<tab><up> append console=ttyS0,115200n8 rd.live.check=0 text ks=http://{{ .HTTPIP }}:{{ .HTTPPort }}/demo.ks<enter><wait>"
			]
		}
	],
	"provisioners": [
		{
			"type": "file",
			"source": "demo.pp",
			"destination": "/root/demo.pp"
		},
		{
			"type": "puppet-masterless",
			"manifest_file": "demo.pp"
		}

	]
}
